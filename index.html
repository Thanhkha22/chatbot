<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>üéì Chatbot H∆∞·ªõng Nghi·ªáp AI</title>

<style>
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(135deg, #e3f2fd, #f4f6fa);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .chat-container {
    width: 90%;
    max-width: 450px;
    height: 90vh;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .chat-header {
    background: #0078ff;
    color: white;
    text-align: center;
    padding: 15px;
    font-weight: bold;
    font-size: 18px;
  }

  .chat-box {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    background: #f9fbff;
    scroll-behavior: smooth;
  }

  .msg {
    display: flex;
    margin-bottom: 12px;
    align-items: flex-end;
    animation: fadeIn 0.3s ease-in-out;
  }
  .msg.user { justify-content: flex-end; }
  .msg.bot { justify-content: flex-start; }

  .bubble {
    padding: 10px 14px;
    border-radius: 18px;
    max-width: 75%;
    line-height: 1.5;
    word-break: break-word;
  }
  .msg.user .bubble { background: #0078ff; color: white; border-bottom-right-radius: 4px; }
  .msg.bot .bubble { background: #eefaf0; color: #333; border-bottom-left-radius: 4px; }

  .avatar {
    width: 32px; height: 32px; border-radius: 50%; margin: 0 6px;
  }

  .input-box {
    display: flex;
    border-top: 1px solid #ccc;
    padding: 10px;
    background: #fafafa;
  }
  .input-box input {
    flex: 1;
    border: none;
    outline: none;
    padding: 10px 15px;
    border-radius: 20px;
    background: #f0f2f5;
    font-size: 15px;
  }
  .input-box button {
    margin-left: 8px;
    border: none;
    background: #0078ff;
    color: white;
    padding: 10px 16px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 500;
    transition: background 0.2s ease;
  }
  .input-box button:hover { background: #005ccc; }

  @keyframes fadeIn { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }

  /* Hi·ªáu ·ª©ng ch·∫•m ƒë·ªông */
  .typing-dots {
    display: inline-block;
    margin-left: 4px;
  }
  .dot {
    height: 8px;
    width: 8px;
    margin: 0 2px;
    background-color: #888;
    border-radius: 50%;
    display: inline-block;
    animation: blink 1.4s infinite both;
  }
  .dot:nth-child(2) { animation-delay: 0.2s; }
  .dot:nth-child(3) { animation-delay: 0.4s; }

  @keyframes blink {
    0%, 80%, 100% { opacity: 0; }
    40% { opacity: 1; }
  }

  .quick-reply {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 8px 10px;
    background: #f3f6fb;
    border-top: 1px solid #ddd;
  }
  .quick-reply button {
    border: none;
    background: #0078ff;
    color: #fff;
    border-radius: 15px;
    padding: 6px 12px;
    font-size: 13px;
    cursor: pointer;
  }
  .quick-reply button:hover { background: #005ccc; }

  @media (max-width: 600px) {
    .chat-container {
      width: 100%;
      height: 100vh;
      border-radius: 0;
    }
    .bubble { max-width: 80%; }
    .chat-header { font-size: 16px; padding: 12px; }
    .input-box input { font-size: 14px; }
  }
</style>
</head>
<body>

<div class="chat-container">
  <!-- HEADER -->
<div class="chat-header" style="
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #0078ff;
  color: white;
  padding: 12px 16px;
  font-weight: 600;
  font-size: 17px;
  position: relative;
">
  <!-- Icon ƒëa nhi·ªám (menu) -->
  <div id="menuIcon" style="
    cursor: pointer;
    font-size: 22px;
    user-select: none;
  " title="T√πy ch·ªçn">
    ‚ò∞
  </div>

  <!-- Ti√™u ƒë·ªÅ -->
  <div style="
    flex: 1;
    text-align: center;
    font-size: 17px;
    text-transform: capitalize;
  ">
    H∆∞·ªõng nghi·ªáp & ch·ªçn ng√†nh h·ªçc
  </div>

  
  <!-- Avatar ho·∫∑c n√∫t ƒëƒÉng nh·∫≠p -->
<div id="googleSection" style="cursor: pointer; position: relative;">
  <!-- V√πng ƒë·ªÉ Google render n√∫t ƒëƒÉng nh·∫≠p ·∫©n -->
  <div id="g_id_signin" style="display: none;"></div>

  <!-- Avatar (hi·ªán khi ch∆∞a login ho·∫∑c sau khi login) -->
  <img id="userAvatar"
    src="https://cdn-icons-png.flaticon.com/512/3001/3001764.png"
    alt="ƒêƒÉng nh·∫≠p"
    style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid white;"
    title="ƒêƒÉng nh·∫≠p Google">
</div>

</div>


  <div class="chat-box" id="chat">
    <div class="msg bot">
      <img class="avatar" src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png" alt="AI">
      <div class="bubble">Xin ch√†o! üëã T√¥i l√† c·ªë v·∫•n h∆∞·ªõng nghi·ªáp AI. H√£y n√≥i cho t√¥i bi·∫øt s·ªü th√≠ch ho·∫∑c ƒëi·ªÉm m·∫°nh c·ªßa b·∫°n nh√©!</div>
    </div>
  </div>

 <div class="quick-reply" style="
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  padding: 12px 14px;
  background: linear-gradient(180deg, #f8faff, #eef4ff);
  border-top: 1px solid #dbe2f0;
  justify-content: center;
">
  <button onclick="sendQuick('T√¥i th√≠ch v·∫Ω v√† s√°ng t·∫°o ngh·ªá thu·∫≠t')" style="
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: white;
    border: 1px solid #c9d8ff;
    color: #0078ff;
    border-radius: 25px;
    padding: 8px 16px;
    font-size: 14px;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.25s ease;
  " onmouseover="this.style.background='#0078ff';this.style.color='#fff';this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 8px rgba(0,120,255,0.25)';"
  onmouseout="this.style.background='white';this.style.color='#0078ff';this.style.transform='none';this.style.boxShadow='0 2px 4px rgba(0,0,0,0.08)';">
    Ngh·ªá thu·∫≠t
  </button>

  <button onclick="sendQuick('T√¥i gi·ªèi To√°n, L√Ω v√† th√≠ch k·ªπ thu·∫≠t')" style="
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: white;
    border: 1px solid #c9d8ff;
    color: #0078ff;
    border-radius: 25px;
    padding: 8px 16px;
    font-size: 14px;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.25s ease;
  " onmouseover="this.style.background='#0078ff';this.style.color='#fff';this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 8px rgba(0,120,255,0.25)';"
  onmouseout="this.style.background='white';this.style.color='#0078ff';this.style.transform='none';this.style.boxShadow='0 2px 4px rgba(0,0,0,0.08)';">
    K·ªπ thu·∫≠t
  </button>

  <button onclick="sendQuick('T√¥i th√≠ch chƒÉm s√≥c v√† gi√∫p ƒë·ª° ng∆∞·ªùi kh√°c')" style="
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: white;
    border: 1px solid #c9d8ff;
    color: #0078ff;
    border-radius: 25px;
    padding: 8px 16px;
    font-size: 14px;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.25s ease;
  " onmouseover="this.style.background='#0078ff';this.style.color='#fff';this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 8px rgba(0,120,255,0.25)';"
  onmouseout="this.style.background='white';this.style.color='#0078ff';this.style.transform='none';this.style.boxShadow='0 2px 4px rgba(0,0,0,0.08)';">
    Y d∆∞·ª£c
  </button>

  <button onclick="sendQuick('T√¥i th√≠ch giao ti·∫øp v√† kinh doanh')" style="
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: white;
    border: 1px solid #c9d8ff;
    color: #0078ff;
    border-radius: 25px;
    padding: 8px 16px;
    font-size: 14px;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.25s ease;
  " onmouseover="this.style.background='#0078ff';this.style.color='#fff';this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 8px rgba(0,120,255,0.25)';"
  onmouseout="this.style.background='white';this.style.color='#0078ff';this.style.transform='none';this.style.boxShadow='0 2px 4px rgba(0,0,0,0.08)';">
    Kinh t·∫ø
  </button>
</div>


  <div class="input-box">
    <input id="input" type="text" placeholder="Nh·∫≠p s·ªü th√≠ch ho·∫∑c ƒëi·ªÉm m·∫°nh c·ªßa b·∫°n...">
    <button onclick="sendMsg()">G·ª≠i</button>
  </div>
</div>

<script>
const GEMINI_KEY = "AIzaSyAV4wI4atRSsk8P7L8agNsF2Z1U-do3Vbk"; // üîí ƒê·ª´ng ƒë·ªÉ key c√¥ng khai nh√©!

async function askGemini(prompt) {
  const response = await fetch(
    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_KEY}`,
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{
          parts: [{
            text: `
Ph√¢n t√≠ch s·ªü th√≠ch ho·∫∑c ƒëi·ªÉm m·∫°nh sau v√† g·ª£i √Ω 3 ng√†nh h·ªçc ph√π h·ª£p ·ªü Vi·ªát Nam (ng·∫Øn g·ªçn, d·ªÖ hi·ªÉu).
K√®m theo: m√¥ t·∫£ ng√†nh, kh·ªëi thi, tr∆∞·ªùng ti√™u bi·ªÉu v√† h∆∞·ªõng ngh·ªÅ nghi·ªáp t∆∞∆°ng lai.
S·ªü th√≠ch: ${prompt}
            `
          }]
        }]
      })
    }
  );

  const data = await response.json();
  return data.candidates?.[0]?.content?.parts?.[0]?.text || "‚ö†Ô∏è Kh√¥ng c√≥ ph·∫£n h·ªìi t·ª´ AI.";
}

// Hi·ªáu ·ª©ng g√µ ch·ªØ t·ª´ng k√Ω t·ª±
async function typeText(container, text, delay = 20) {
  container.innerHTML = "";
  for (let i = 0; i < text.length; i++) {
    container.innerHTML += text.charAt(i);
    container.scrollIntoView({ behavior: "smooth", block: "end" });
    await new Promise(r => setTimeout(r, delay));
  }
}

async function sendMsg(message = null) {
  const input = document.getElementById("input");
  const chat = document.getElementById("chat");
  const msg = message || input.value.trim();
  if (!msg) return;
  input.value = "";

  // Hi·ªÉn th·ªã tin nh·∫Øn ng∆∞·ªùi d√πng
  chat.innerHTML += `
    <div class='msg user'>
      <div class='bubble'>${msg}</div>
      <img class="avatar" src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="User">
    </div>`;
  chat.scrollTop = chat.scrollHeight;

  // Hi·ªÉn th·ªã "ƒëang suy nghƒ©..."
  const botMsg = document.createElement("div");
  botMsg.className = "msg bot";
  botMsg.innerHTML = `
    <img class="avatar" src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png" alt="AI">
    <div class="bubble">
      Vui l√≤ng ch·ªù trong gi√¢y l√°t
      <span class="typing-dots">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      </span>
    </div>`;
  chat.appendChild(botMsg);
  chat.scrollTop = chat.scrollHeight;

  const bubble = botMsg.querySelector(".bubble");

  try {
    const reply = await askGemini(msg);
    await new Promise(r => setTimeout(r, 400)); // ƒë·ªÉ hi·ªáu ·ª©ng tr√¥ng t·ª± nhi√™n
    await typeText(bubble, reply, 18);
  } catch(e) {
    bubble.innerHTML = `‚ö†Ô∏è L·ªói: ${e.message}`;
  }

  chat.scrollTop = chat.scrollHeight;
}

function sendQuick(text) {
  document.getElementById("input").value = text;
  sendMsg(text);
}
</script>

<!-- login gg -->
<!-- login gg -->
<script src="https://accounts.google.com/gsi/client" async defer></script>

<script>
window.onload = function() {
  // üîπ Kh·ªüi t·∫°o Google Identity
  google.accounts.id.initialize({
    client_id: "651931498757-b81tibe02fm08puv5tacju8qs97dnqrt.apps.googleusercontent.com", // üëà thay b·∫±ng Client ID c·ªßa b·∫°n
    callback: handleCredentialResponse,
  });

  // üîπ Render n√∫t ƒëƒÉng nh·∫≠p Google ·∫©n (ƒë·ªÉ click avatar k√≠ch ho·∫°t)
  google.accounts.id.renderButton(
    document.getElementById("g_id_signin"),
    { theme: "outline", size: "large" } // style ·∫©n, ch·ªâ ƒë·ªÉ trigger
  );

  // Khi click avatar ‚Üí m√¥ ph·ªèng click v√†o n√∫t ƒëƒÉng nh·∫≠p
  const avatarSection = document.getElementById("googleSection");
  avatarSection.addEventListener("click", () => {
    document.querySelector("#g_id_signin div[role=button]").click();
  });
};

// üîπ X·ª≠ l√Ω sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng
function handleCredentialResponse(response) {
  const data = parseJwt(response.credential);
  const avatar = document.getElementById("userAvatar");

  if (data.picture) {
    avatar.src = data.picture;
    avatar.title = `${data.name} (${data.email})`;
  } else {
    avatar.src = "https://cdn-icons-png.flaticon.com/512/149/149071.png";
  }

  // üëâ Th√¥ng b√°o ch√†o m·ª´ng (tu·ª≥ ch·ªçn)
  const chat = document.getElementById("chat");
  chat.innerHTML += `
    <div class='msg bot'>
      <img class="avatar" src="https://cdn-icons-png.flaticon.com/512/4712/4712109.png">
      <div class='bubble'>Xin ch√†o <b>${data.given_name || data.name}</b> üëã! R·∫•t vui ƒë∆∞·ª£c ƒë·ªìng h√†nh c√πng b·∫°n trong h√†nh tr√¨nh ch·ªçn ng√†nh!</div>
    </div>`;
  chat.scrollTop = chat.scrollHeight;
}

// üîπ Gi·∫£i m√£ JWT (token tr·∫£ v·ªÅ t·ª´ Google)
function parseJwt(token) {
  const base64Url = token.split('.')[1];
  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
  const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {
    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(''));
  return JSON.parse(jsonPayload);
}
</script>




</body>
</html>
